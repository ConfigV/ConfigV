wget ¦-qO-¦http://keplerproject.github.io/luarocks/releases/luarocks-${LUAROCKS_VERSION}.tar.gz¦|¦tar¦-xz :: Dependencies_operation,()
cd ¦ngx_openresty-${OPENRESTY_VERSION} :: Filesystem_operation,()
chown ¦-R¦nginx:nginx¦/var/log/nginx :: Permissions_operation,()
./configure ¦--prefix=/usr/share/openresty/luajit¦--with-lua=/usr/share/openresty/luajit/¦--lua-suffix=jit-2.1.0-alpha¦--with-lua-include=/usr/share/openresty/luajit/include/luajit-2.1 :: Build_Execute_operation,()
wget ¦-qO-¦https://openresty.org/download/ngx_openresty-${OPENRESTY_VERSION}.tar.gz¦|¦tar¦-xz :: Dependencies_operation,()
LUAROCKS_VERSION:2.2.2 :: env_operation,()
apk ¦del¦build-base :: Dependencies_operation,()
mkdir ¦-p¦/tmp/src :: Filesystem_operation,()
mkdir ¦-p¦-m¦700¦/var/lib/nginx/tmp :: Filesystem_operation,()
make ¦build :: Build_Execute_operation,()
conf/etc/nginx :: copy_operation,()
cmd,nginx¦-g¦daemon off;
expose,80 443
wget ¦-qO-¦https://github.com/arut/nginx-rtmp-module/archive/v${NGINX_RTMP_VERSION}.tar.gz¦|¦tar¦-xz :: Dependencies_operation,()
adduser ¦-S¦-G¦nginx¦-H¦-h¦/var/www/localhost/htdocs¦-s¦/sbin/nologin¦-D¦nginx :: Permissions_operation,()
NGINX_RTMP_VERSION:1.1.7 :: env_operation,()
mkdir ¦-p¦-m¦700¦/var/lib/nginx :: Filesystem_operation,()
cd ¦../luarocks-${LUAROCKS_VERSION} :: Filesystem_operation,()
apk ¦add¦--update¦build-base¦perl¦pcre-dev¦openssl-dev¦zlib-dev¦ncurses-dev¦readline-dev¦linux-headers :: Dependencies_operation,()
make ¦install :: Build_Execute_operation,()
addgroup ¦-S¦nginx :: Permissions_operation,()
ln ¦-sf¦/dev/stdout¦/var/log/nginx/access.log :: Filesystem_operation,()
touch ¦/var/log/nginx/access.log :: Filesystem_operation,()
from,jalaziz/base:alpine
/usr/share/openresty/luajit/bin/luarocks ¦install¦lua-resty-template :: Other_operation,()
chmod ¦700¦/var/log/nginx :: Permissions_operation,()
cd ¦/tmp/src :: Filesystem_operation,()
/var/cache/nginx :: volume_operation,()
./configure ¦--prefix=/usr/share/openresty¦--sbin-path=/usr/sbin/nginx¦--conf-path=/etc/nginx/nginx.conf¦--pid-path=/var/run/nginx.pid¦--lock-path=/var/run/nginx.lock¦--error-log-path=/var/log/nginx/error.log¦--http-log-path=/var/log/nginx/access.log¦-... :: Build_Execute_operation,()
rm ¦-rf¦/var/cache/apk/*¦/tmp/*¦~/.cache :: Filesystem_operation,()
mkdir ¦-p¦-m¦755¦/etc/nginx/conf.d :: Filesystem_operation,()
cp ¦/tmp/src/nginx-rtmp-module-${NGINX_RTMP_VERSION}/stat.xsl¦/usr/share/openresty/nginx/html/ :: Filesystem_operation,()
touch ¦/var/log/nginx/error.log :: Filesystem_operation,()
chmod ¦640¦/var/log/nginx/access.log :: Permissions_operation,()
OPENRESTY_VERSION:1.9.3.1 :: env_operation,()
ln ¦-sf¦/dev/stderr¦/var/log/nginx/error.log :: Filesystem_operation,()
addgroup ¦nginx¦www-data :: Permissions_operation,()
chmod ¦640¦/var/log/nginx/error.log :: Permissions_operation,()
/etc/nginx/conf.d :: volume_operation,()
chown ¦-R¦nginx:nginx¦/var/lib/nginx :: Permissions_operation,()
