PATH:$PATH:/usr/lib/postgresql-${PGVERSION}/bin :: env_operation,()
postgres_ha.sh/home/postgres/ :: add_operation,()
PGDATA:/home/postgres/data :: env_operation,()
apt-get ¦install¦wget¦ca-certificates¦-y :: Dependencies_operation,()
pg_dropcluster ¦--stop¦${PGVERSION}¦main :: Other_operation,()
from,ubuntu:14.04
curl ¦-L¦https://github.com/coreos/etcd/releases/download/v${ETCDVERSION}/etcd-v${ETCDVERSION}-linux-amd64.tar.gz¦-o¦etcd-v${ETCDVERSION}-linux-amd64.tar.gz :: Dependencies_operation,()
localedef ¦-i¦en_US¦-c¦-f¦UTF-8¦-A¦/usr/share/locale/locale.alias¦en_US.UTF-8 :: Other_operation,()
/home/postgres :: workdir_operation,()
expose,5432
wget ¦--quiet¦-O¦-¦https://www.postgresql.org/media/keys/ACCC4CF8.asc¦|¦sudo¦apt-key¦add¦- :: Dependencies_operation,()
postgres :: user_operation,()
apt-get ¦update¦-y :: Dependencies_operation,()
apt-get ¦install¦haproxy :: Dependencies_operation,()
usermod ¦-d¦/home/postgres¦-m¦postgres :: Permissions_operation,()
apt-get ¦upgrade¦-y :: Dependencies_operation,()
chown ¦postgres:postgres¦/home/postgres/postgres_ha.sh :: Permissions_operation,()
apt-get ¦install¦python¦python-yaml¦-y :: Dependencies_operation,()
apt-get ¦install¦curl¦-y :: Dependencies_operation,()
entrypoint,/bin/bash¦/home/postgres/postgres_ha.sh
echo ¦echo¦"deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list :: Filesystem_operation,()
cp ¦etcd-v${ETCDVERSION}-linux-amd64/etcd*¦/bin/ :: Filesystem_operation,()
chmod ¦700¦/home/postgres/postgres_ha.sh :: Permissions_operation,()
apt-get ¦install¦git¦-y :: Dependencies_operation,()
tar ¦vzxf¦etcd-v${ETCDVERSION}-linux-amd64.tar.gz :: Filesystem_operation,()
cmd,batman
PGVERSION:9.4 :: env_operation,()
ETCDVERSION:2.0.9 :: env_operation,()
apt-get ¦install¦postgresql-${PGVERSION}¦postgresql-${PGVERSION}-dbg¦postgresql-server-dev-${PGVERSION}¦postgresql-client-${PGVERSION}¦postgresql-contrib-${PGVERSION}¦postgresql-${PGVERSION}-plproxy¦postgresql-${PGVERSION}-pgq3¦postgresql-${PGVERSI... :: Dependencies_operation,()
apt-get ¦install¦python-psycopg2¦-y :: Dependencies_operation,()
