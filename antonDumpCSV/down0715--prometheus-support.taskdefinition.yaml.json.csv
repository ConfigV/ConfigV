Resources.AWS::ECS::TaskDefinition.Properties.Family,ixortalk-prometheus-support-nginx
Resources.AWS::ECS::TaskDefinition.Properties.Volumes,"[{u'Host': {u'SourcePath': u'/proc'}, u'Name': u'node-exporter-proc-volume'}, {u'Host': {u'SourcePath': u'/sys'}, u'Name': u'node-exporter-sys-volume'}, {u'Host': {u'SourcePath': u'/'}, u'Name': u'node-exporter-rootfs-volume'}, {u'Host': {u'SourcePath': u'/var/lib/docker'}, u'Name': u'cadvisor-docker-volume'}, {u'Host': {u'SourcePath': u'/sys'}, u'Name': u'cadvisor-sys-volume'}, {u'Host': {u'SourcePath': u'/'}, u'Name': u'cadvisor-rootfs-volume'}, {u'Host': {u'SourcePath': u'/cgroup'}, u'Name': u'cadvisor-cgroup-volume'}, {u'Host': {u'SourcePath': u'/var/run'}, u'Name': u'cadvisor-var-run-volume'}]"
Parameters.LoadbalancerDNS.Type,String
Resources.AWS::Logs::LogGroup.Properties.LogGroupName,cadvisor-logs
Resources.AWS::Logs::LogGroup.Properties.RetentionInDays,365
Parameters.SpringCloudConfigLabel.Type,String
Parameters.SpringProfilesActive.Type,String
Parameters.BlackboxExporterImageVersion.Type,String
Parameters.SpringCloudConfigLabel.Description,The branch of the config environment to use
Parameters.CAdvisorImageVersion.Type,String
Outputs.TaskDefinition.Value,TaskDefinition
Parameters.NodeExporterImageVersion.Type,String
Resources.AWS::ECS::TaskDefinition.Type,AWS::ECS::TaskDefinition
Resources.AWS::ECS::TaskDefinition.Properties.ContainerDefinitions,"[{u'LogConfiguration': {u'LogDriver': u'awslogs', u'Options': {u'awslogs-group': u'nginx-prometheus-support-logs', u'awslogs-region': u'AWS::Region'}}, u'Name': u'ixortalk-prometheus-support-nginx', u'Links': [u'ixortalk-blackbox-exporter', u'ixortalk-node-exporter', u'ixortalk-cadvisor'], u'Image': u'ixortalk/ixortalk-nginx-docker-proxy:${NginxImageVersion}', u'Environment': [{u'Name': u'IXORTALK_NGINX_PROFILE', u'Value': u'SpringProfilesActive'}, {u'Name': u'IXORTALK_CONFIG_SERVER_LABEL', u'Value': u'SpringCloudConfigLabel'}, {u'Name': u'IXORTALK_NGINX_ENABLE_BASIC_AUTH', u'Value': u'false'}, {u'Name': u'IXORTALK_CONFIG_SERVER_URL', u'Value': u'https://${LoadbalancerDNS}/config'}, {u'Name': u'IXORTALK_NGINX_SUFFIX', u'Value': u'prometheus-support'}], u'Memory': 64, u'PortMappings': [{u'ContainerPort': 8004}], u'Essential': True}, {u'LogConfiguration': {u'LogDriver': u'awslogs', u'Options': {u'awslogs-group': u'blackbox-exporter-logs', u'awslogs-region': u'AWS::Region'}}, u'Name': u'ixortalk-blackbox-exporter', u'Image': u'ixortalk/ixortalk-blackbox-exporter:${BlackboxExporterImageVersion}', u'Environment': [{u'Name': u'IXORTALK_PROFILE', u'Value': u'SpringProfilesActive'}, {u'Name': u'IXORTALK_CONFIG_SERVER_URL', u'Value': u'https://${LoadbalancerDNS}/config'}, {u'Name': u'IXORTALK_CONFIG_SERVER_LABEL', u'Value': u'SpringCloudConfigLabel'}, {u'Name': u'IXORTALK_LB_DNS', u'Value': u'${LoadbalancerDNS}'}, {u'Name': u'IXORTALK_LB_PORT', u'Value': 80}, {u'Name': u'IXORTALK_SERVER_CONTEXT_PATH', u'Value': u'/prometheus-support/blackbox-exporter/'}], u'Memory': 64, u'PortMappings': [{u'ContainerPort': 9115}], u'Essential': False}, {u'MountPoints': [{u'SourceVolume': u'node-exporter-proc-volume', u'ReadOnly': True, u'ContainerPath': u'/host/proc'}, {u'SourceVolume': u'node-exporter-sys-volume', u'ReadOnly': True, u'ContainerPath': u'/host/sysfs'}, {u'SourceVolume': u'node-exporter-rootfs-volume', u'ReadOnly': True, u'ContainerPath': u'/roots'}], u'Name': u'ixortalk-node-exporter', u'Image': u'prom/node-exporter:${NodeExporterImageVersion}', u'LogConfiguration': {u'LogDriver': u'awslogs', u'Options': {u'awslogs-group': u'nodeexporter-logs', u'awslogs-region': u'AWS::Region'}}, u'Command': [u'--web.telemetry-path=/metrics', u'--path.procfs=/host/proc', u'--path.sysfs=/host/sysfs', u'--collector.filesystem.ignored-mount-points=""^/(sys|proc|dev|host|etc|rootfs/var/lib/docker|rootfs/run/docker/netns|rootfs/var/lib/docker|rootfs/var/run/docker/netns)($$|/)""', u'--no-collector.timex', u'--no-collector.filesystem'], u'User': u'root', u'Memory': 64, u'PortMappings': [{u'ContainerPort': 9100}], u'Essential': False}, {u'MountPoints': [{u'SourceVolume': u'cadvisor-docker-volume', u'ReadOnly': True, u'ContainerPath': u'/var/lib/docker'}, {u'SourceVolume': u'cadvisor-sys-volume', u'ReadOnly': True, u'ContainerPath': u'/sys'}, {u'SourceVolume': u'cadvisor-rootfs-volume', u'ReadOnly': True, u'ContainerPath': u'/roots'}, {u'SourceVolume': u'cadvisor-cgroup-volume', u'ReadOnly': True, u'ContainerPath': u'/sys/fs/cgroup'}, {u'SourceVolume': u'cadvisor-var-run-volume', u'ContainerPath': u'/var/run'}], u'Name': u'ixortalk-cadvisor', u'Image': u'google/cadvisor:${CAdvisorImageVersion}', u'LogConfiguration': {u'LogDriver': u'awslogs', u'Options': {u'awslogs-group': u'cadvisor-logs', u'awslogs-region': u'AWS::Region'}}, u'User': u'root', u'Memory': 256, u'PortMappings': [{u'ContainerPort': 8080}], u'Essential': False}]"
Resources.AWS::Logs::LogGroup.Type,AWS::Logs::LogGroup
Parameters.NginxImageVersion.Type,String
