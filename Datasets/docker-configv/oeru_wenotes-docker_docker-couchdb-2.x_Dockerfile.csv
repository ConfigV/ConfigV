APT_FILE:sources.list :: env_operation,()
${COUCHDIR}/data :: volume_operation,()
LANGUAGE:en_NZ.UTF-8 :: env_operation,()
expose,5984 4369 9100
echo ¦echo¦"deb-src $APT_SERVER ${UBUNTU_NAME}-updates main universe" >> /etc/apt/${APT_FILE} :: Filesystem_operation,()
mkdir ¦couchdb :: Filesystem_operation,()
echo ¦echo¦"deb $APT_SERVER ${UBUNTU_NAME}-updates main universe" >> /etc/apt/${APT_FILE} :: Filesystem_operation,()
mkdir ¦${COUCHDIR}/data¦${COUCHDIR}/etc/local.d¦${COUCHDIR}/etc/default.d :: Filesystem_operation,()
couchdb/vm.args${COUCHDIR}/etc/ :: copy_operation,()
UBUNTU_NAME:trusty :: env_operation,()
echo ¦echo¦"export VISIBLE=now" >> /etc/profile && echo "export TERM=xterm" >> /etc/bash.bashrc :: Filesystem_operation,()
LANG:en_NZ.UTF-8 :: env_operation,()
from,ubuntu@trusty
echo ¦echo¦"deb $APT_SERVER ${UBUNTU_NAME} main universe" > /etc/apt/${APT_FILE} :: Filesystem_operation,()
cd ¦couchdb¦#¦Build¦the¦release¦and¦install¦into¦/opt :: Filesystem_operation,()
echo ¦echo¦"deb $APT_SERVER ${UBUNTU_NAME}-security main universe" >> /etc/apt/${APT_FILE} :: Filesystem_operation,()
echo ¦curl¦-s https://deb.nodesource.com/gpgkey/nodesource.gpg.key | apt-key add - && echo 'deb https://deb.nodesource.com/node_4.x trusty main' > /etc/apt/sources.list.d/nodesource.list && echo 'deb-src https://deb.nodesource.com/node_4.x trust... :: Filesystem_operation,()
chmod ¦+x¦/couchdb-init.sh :: Permissions_operation,()
useradd ¦-d¦$COUCHDIR¦-g¦couchdb¦couchdb :: Permissions_operation,()
entrypoint,tini¦--¦/couchdb-init.sh
locale-gen ¦$LANG :: Other_operation,()
echo ¦echo¦"deb-src $APT_SERVER ${UBUNTU_NAME}-security main universe" >> /etc/apt/${APT_FILE} :: Filesystem_operation,()
couchdb/local.ini${COUCHDIR}/etc/ :: copy_operation,()
DEBIAN_FRONTEND:noninteractive :: env_operation,()
apt-get ¦install¦-y¦--no-install-recommends¦build-essential¦erlang-dev¦libcurl4-openssl-dev¦libicu-dev¦libmozjs185-dev¦#¦install¦nodejs¦stack... :: Dependencies_operation,()
cmd,/opt/couchdb/bin/couchdb
APT_SERVER:http://ucmirror.canterbury.ac.nz/ubuntu :: env_operation,()
dpkg ¦--print-architecture :: Dependencies_operation,()
COUCHDIR:/opt/couchdb :: env_operation,()
echo ¦echo¦"deb-src $APT_SERVER ${UBUNTU_NAME} main universe" >> /etc/apt/${APT_FILE} :: Filesystem_operation,()
rm ¦-rf¦/var/lib/apt/lists/* :: Filesystem_operation,()
chown ¦-R¦couchdb:couchdb¦${COUCHDIR} :: Permissions_operation,()
COUCHDB_VERSION:2.0.0 :: env_operation,()
tar ¦-xzf¦couchdb.tar.gz¦-C¦couchdb¦--strip-components=1 :: Filesystem_operation,()
groupadd ¦-r¦couchdb :: Permissions_operation,()
couchdb/couchdb-init.sh/ :: copy_operation,()
LC_ALL:en_NZ.UTF-8 :: env_operation,()
cd ¦/usr/src :: Filesystem_operation,()
apt-get ¦update¦-y :: Dependencies_operation,()
curl ¦-fSL¦https://dist.apache.org/repos/dist/release/couchdb/source/${COUCHDB_VERSION}/apache-couchdb-${COUCHDB_VERSION}.tar.gz¦-o¦couchdb.tar.gz :: Dependencies_operation,()
${COUCHDIR} :: workdir_operation,()
apt-get ¦install¦-y¦--no-install-recommends¦apt-transport-https¦apt-utils¦ca-certificates¦curl¦git¦haproxy¦erlang-nox¦erlang-reltool¦libicu52¦libmozjs185-1.0¦openssl :: Dependencies_operation,()
