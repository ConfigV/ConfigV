BITBUCKET_HOME:/var/atlassian/bitbucket :: env_operation,()
expose,7990 7999
apt-get ¦update¦--quiet :: Dependencies_operation,()
xmlstarlet ¦ed¦--inplace¦--delete¦"Server/Service/Engine/Host/@xmlValidation"¦--delete¦"Server/Service/Engine/Host/@xmlNamespaceAware"¦"${BITBUCKET_INSTALL}/conf/server.xml" :: Other_operation,()
sed ¦--in-place¦'s/^#¦umask¦0027$/umask¦0027/g'¦"${BITBUCKET_INSTALL}/bin/setenv.sh" :: Filesystem_operation,()
${BITBUCKET_HOME} :: workdir_operation,()
chown ¦-R¦daemon:daemon¦"${BITBUCKET_INSTALL}/temp" :: Permissions_operation,()
apt-get ¦clean :: Dependencies_operation,()
chown ¦-R¦daemon:daemon¦"${BITBUCKET_INSTALL}/logs" :: Permissions_operation,()
chown ¦-R¦daemon:daemon¦"${BITBUCKET_INSTALL}/conf" :: Permissions_operation,()
cmd,/opt/atlassian/bitbucket/bin/catalina.sh¦run
apt-get ¦install¦--quiet¦--yes¦--no-install-recommends¦libtcnative-1¦git-core¦xmlstarlet :: Dependencies_operation,()
mkdir ¦-p¦"${BITBUCKET_INSTALL}" :: Filesystem_operation,()
chmod ¦-R¦700¦"${BITBUCKET_INSTALL}/conf" :: Permissions_operation,()
daemon:daemon :: user_operation,()
/var/atlassian/bitbucket :: volume_operation,()
curl ¦-Ls¦"https://www.atlassian.com/software/stash/downloads/binary/atlassian-bitbucket-${BITBUCKET_VERSION}.tar.gz"¦|¦tar¦-zx¦--directory¦"${BITBUCKET_INSTALL}"¦--strip-components=1¦--no-same-owner :: Dependencies_operation,()
chmod ¦-R¦700¦"${BITBUCKET_INSTALL}/logs" :: Permissions_operation,()
BITBUCKET_INSTALL:/opt/atlassian/bitbucket :: env_operation,()
BITBUCKET_VERSION:4.0.1 :: env_operation,()
from,java:8.0
chmod ¦-R¦700¦"${BITBUCKET_INSTALL}/work" :: Permissions_operation,()
mkdir ¦-p¦"${BITBUCKET_HOME}/lib" :: Filesystem_operation,()
chown ¦-R¦daemon:daemon¦"${BITBUCKET_INSTALL}/work" :: Permissions_operation,()
chmod ¦-R¦700¦"${BITBUCKET_HOME}" :: Permissions_operation,()
chmod ¦-R¦700¦"${BITBUCKET_INSTALL}/temp" :: Permissions_operation,()
curl ¦-Ls¦"https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.36.tar.gz"¦|¦tar¦-xz¦--directory¦"${BITBUCKET_INSTALL}/lib"¦--strip-components=1¦--no-same-owner¦"mysql-connector-java-5.1.36/mysql-connector-java-5.1.36-bin.jar... :: Dependencies_operation,()
chown ¦-R¦daemon:daemon¦"${BITBUCKET_HOME}" :: Permissions_operation,()
set ¦-x :: Environment_operation,()
ln ¦--symbolic¦"/usr/lib/x86_64-linux-gnu/libtcnative-1.so"¦"${BITBUCKET_INSTALL}/lib/native/libtcnative-1.so" :: Filesystem_operation,()
